<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hertz Hunter Web UI</title>
    <link rel="stylesheet" href="/bulma.min.css">
    <link rel="icon" href="/images/favicon_dark.ico" media="(prefers-color-scheme: light)">
    <link rel="icon" href="/images/favicon_light.ico" media="(prefers-color-scheme: dark)">
    <style>
        #tab-content>div {
            display: none;
        }

        #tab-content>div.active-tab {
            display: block;
        }

        .options-label {
            width: 99px;
        }

        .options-container {
            white-space: nowrap;
            display: inline-block;
        }

        .github-dark {
            display: none;
        }

        @media (prefers-color-scheme: light) {
            .github-dark {
                display: block;
            }

            .github-light {
                display: none;
            }
        }
    </style>
</head>

<body>
    <!-- Title -->
    <h1 class="title has-text-centered mt-5">Hertz Hunter Web UI</h1>

    <!-- Tab navigation -->
    <div class="tabs is-centered is-boxed">
        <ul>
            <li class="is-active" data-tab="scan-tab"><a>Scan</a></li>
            <li data-tab="settings-tab"><a>Settings</a></li>
            <li data-tab="calibration-tab"><a>Calibration</a></li>
            <li data-tab="about-tab"><a>About</a></li>
        </ul>
    </div>

    <!-- Tab content -->
    <div id="tab-content">
        <!-- Scan tab -->
        <div id="scan-tab" class="has-text-centered active-tab">scan</div>

        <!-- Settings tab -->
        <div id="settings-tab" class="has-text-centered">
            <div class="options-container">
                <!-- Scan interval options -->
                <div class="field is-horizontal">
                    <div class="field-label is-normal">
                        <label class="label options-label">Scan interval</label>
                    </div>
                    <div class="field-body">
                        <div class="field is-narrow">
                            <div class="control">
                                <div class="select is-fullwidth">
                                    <select name="" id="">
                                        <option>5MHz</option>
                                        <option>10MHz</option>
                                        <option>20MHz</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Buzzer options -->
                <div class="field is-horizontal">
                    <div class="field-label is-normal">
                        <label class="label options-label">Buzzer</label>
                    </div>
                    <div class="field-body">
                        <div class="field is-narrow">
                            <div class="control">
                                <div class="select is-fullwidth">
                                    <select name="" id="">
                                        <option>On</option>
                                        <option>Off</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Battery alarm options -->
                <div class="field is-horizontal">
                    <div class="field-label is-normal">
                        <label class="label options-label">Battery alarm</label>
                    </div>
                    <div class="field-body">
                        <div class="field is-narrow">
                            <div class="control">
                                <div class="select is-fullwidth">
                                    <select name="" id="">
                                        <option>3.6v</option>
                                        <option>3.3v</option>
                                        <option>3.0v</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calibration tab -->
        <div id="calibration-tab" class="has-text-centered">calibration</div>

        <!-- About tab -->
        <div id="about-tab" class="has-text-centered">
            <p class="mb-5">DIY 5.8GHz spectrum analyser for FPV drones</p>
            <div class="mb-5">
                <p><b>Version: </b><span id="version"></span></p>
                <p><b>Author: </b><span id="author"></span></p>
            </div>
            <a class="is-inline-flex is-align-items-center" href="https://github.com/odddollar/Hertz-hunter"
                target="_blank">
                <img class="image is-32x32 mr-2 github-dark" src="/images/GitHub_dark.png" alt="GitHub logo">
                <img class="image is-32x32 mr-2 github-light" src="/images/GitHub_light.png" alt="GitHub logo">
                GitHub
            </a>
        </div>
    </div>

    <script>
        // Handle switching between tabs
        document.querySelectorAll(".tabs>ul>li").forEach(tab => {
            tab.addEventListener("click", () => {
                // Remove is-active from all tabs
                document.querySelectorAll(".tabs>ul>li").forEach(t => t.classList.remove("is-active"));
                // Add is-active to the clicked tab
                tab.classList.add("is-active");

                // Remove active-tab from all tab contents
                document.querySelectorAll("#tab-content>div").forEach(t => t.classList.remove("active-tab"));
                // Show selected tab content
                const selectedTab = tab.getAttribute("data-tab");
                document.getElementById(selectedTab).classList.add("active-tab");
            });
        });

        // Handle fetching about information
        fetch("/api/about").then((r) => r.json()).then((r) => {
            // Get version and author tags
            const versionTag = document.getElementById("version");
            const authorTag = document.getElementById("author");

            // Set version and author
            versionTag.innerText = r["version"];
            authorTag.innerText = r["author"];
        }).catch((e) => {
            console.error("API fetch error:", e);
        });
    </script>
</body>

</html>
